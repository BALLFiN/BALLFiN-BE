import os
from graph_classification import classify_news_document

# 테스트 뉴스 예시
test_news = """
정부, 반도체 산업 수출 관세 전면 인하 발표

산업통상자원부는 오늘 반도체 산업 경쟁력 강화를 위한 수출 관세 전면 인하 정책을 발표했다. 이번 결정은 글로벌 반도체 시장에서 국내 기업들의 경쟁력을 높이기 위한 조치로, 삼성전자와 SK하이닉스 등 주요 반도체 제조업체들의 수출 비용을 연간 약 3,000억원 절감할 것으로 예상된다.

정부 관계자는 "미국과 중국 간 기술 패권 경쟁이 심화되는 상황에서 국내 반도체 산업의 글로벌 경쟁력을 유지하기 위한 필수적인 조치"라고 설명했다. 이번 관세 인하는 다음 달 1일부터 즉시 적용될 예정이다.

시장 전문가들은 이번 정책이 국내 반도체 기업들의 수익성 개선으로 이어질 것으로 전망하고 있으며, 특히 메모리 반도체 분야에서 경쟁 우위를 더욱 강화하는 계기가 될 것으로 분석했다.
"""

# 다른 카테고리의 뉴스 예시 추가
test_news2 = """
삼성전자, TSMC와 5년간 100억 달러 반도체 공급 계약 체결

삼성전자는 오늘 대만의 TSMC와 향후 5년간 100억 달러 규모의 반도체 공급 계약을 체결했다고 발표했다. 이번 계약에 따라 삼성전자는 TSMC에 최신 5나노 공정으로 제작된 모바일 AP 및 AI 칩을 공급하게 된다.

업계 관계자에 따르면 이번 계약은 삼성전자의 파운드리 사업에 큰 도약이 될 전망이며, 글로벌 반도체 시장에서의 입지를 더욱 강화할 것으로 기대된다. 삼성전자 측은 "세계 최고 수준의 기술력을 바탕으로 안정적인 공급망을 구축하는 계기가 될 것"이라고 밝혔다.

이번 계약은 미중 기술 패권 경쟁 속에서 반도체 공급망 다변화를 모색하는 TSMC의 전략적 판단으로 분석되고 있다.
"""

test_news3 = """
뉴욕=이데일리 김상윤 특파원] 미국의 1분기 경제가 역성장했다. 하지만 도널드 트럼프 대통령의 관세 정책 시행을 앞두고 기업들이 재고 확보를 위해 미리 수입량을 크게 확대한 점을 고려하면 경제 자체가 크게 위축된 것이 아니라는 분석이 우세하다. 오히려 인플레이션이 예상보다 빠르게 반등하면서 향후 경제의 발목을 잡을 가능성이 커지고 있다. 연방준비제도의 금리 인하 경로는 한층 복잡해질 전망이다.
지난달 30일(현지시간) 미 상무부 산하 경제분석국(BEA)은 올 1분기( 1~3월) 실질 국내총생산(GDP)이 전분기 대비 연율 기준으로 0.3% 감소했다고 밝혔다. 지난해 4분기 2.4% 성장과 비교하면 급격한 위축이다. 다우존스가 집계한 전문가 전망치(0.4%)도 크게 밑돌았다. 분기 기준 역성장은 2022년 1분기(-1.0%) 이후 3년 만이다.
이번 역성장은 수입 급증과 정부 지출 감소가 주요 요인으로 작용했다. 기업들은 4월 초 본격화되는 관세 부과에 앞서 상품을 앞당겨 들여오며 수입을 41.3% 늘렸고, 이 가운데 상품 수입은 무려 50.9% 급증했다. 이는 GDP 성장률에서 거의 5%포인트를 깎아내리는 효과를 냈다. 연방정부 지출도 같은 기간 5.1% 줄어 GDP를 약 0.3%포인트 끌어내렸다.
하지만 수입 증가는 관세 정책 시행 전 일시적인 현상이고, 정부지출 감소 역시 정부효율부(DOGE)의 파급효과로 일종의 GDP에서 ‘잡음’으로 간주할 수 있다. 이를 제외하고 봐야 현재 미국의 경제 성장 상황을 보다 면밀하게 볼 수 있다는 게 미 전문가들의 지적이다.
실제 미국 경제의 실질 흐름을 반영하는 지표는 여전히 건재한 편이다. 대표적인 지표가 ‘민간 국내 최종 판매’(Final Sales to Private Domestic Purchasers)다. 이는 소비와 민간 고정투자(기업 설비 및 주거용 투자 포함)를 합한 수치로, 1분기에는 3.0% 증가해 4분기(2.9%)와 유사한 흐름을 보였다.
이 지표는 재고, 순수출, 정부 지출을 제외한 값으로, 물가에서 변동성이 큰 항목을 제외한 ‘근원 소비자물가지수’와 유사한 개념이다. 그래서 ‘근원 GDP’로 불리기도 한다. 이러한 수치를 고려하면 미국 경제가 관세로 인해 급격히 둔화되고 있다고 보기는 어렵다. 폴 스탠리 그래닛 베이 웰스매니지먼트 최고투자책임자(CIO)는 “분기 성장률이 마이너스를 기록한 것은 불안 요인이지만, 당장 경기 침체가 시작됐다고 보긴 어렵다”고 평가했다.
반면 인플레이션은 뚜렷하게 반등 조짐을 보이고 있다. 1분기 개인소비지출(PCE) 물가지수는 3.6% 상승해, 4분기(2.4%)보다 큰 폭으로 높아졌다. 변동성이 큰 식료품과 에너지를 제외한 근원 PCE는 같은 기간 3.5% 올라 전 분기(2.6%)보다 높은 상승률을 기록했다.
시장에서는 연준이 예상보다 빠른 6월부터 금리 인하를 단행하길 원하지만, 이처럼 경제가 견고하고 인플레이션이 반등할 가능성이 커진다면 연준이 금리 인하에 더욱 신중해질 수밖에 없다.
톰 포첼리 PGIM 채권 수석 이코노미스트는 “연준은 지금 매우 까다로운 상황에 놓여 있다”며 “현재 인플레이션은 목표치를 상회하고 있고, 기대 인플레이션도 다소 불안정한 흐름을 보이고 있다”고 설명했다. 그는 “지속적인 인플레이션 압력이 없다면 경기 둔화 가능성에 대비해 큰 폭의 금리 인하를 단행할 수도 있겠지만, 현재로선 그런 전개가 뚜렷하게 나타나지 않고 있다”고 분석했다.
"""

def run_test(news_text, title=""):
    print(f"\n\n{'='*50}")
    print(f"테스트: {title if title else '뉴스 분류 테스트'}")
    print(f"{'='*50}")
    
    # 분류 실행
    result = classify_news_document(news_text)
    
    # 결과 출력
    print("\n===== 뉴스 분류 결과 =====")
    print(f"카테고리: {result['classification_result']['category']}")
    print(f"세부 카테고리: {result['classification_result']['textinformation']}")
    print(f"신뢰도: {result['classification_result']['confidence']}")
    print(f"분류 이유: {result['classification_result']['reason']}")
    
    print("\n===== 추출된 정보 =====")
    for key, value in result['extracted_info'].items():
        print(f"{key}: {value}")
    
    return result

# 테스트 실행
result1 = run_test(test_news, "정부 관세 정책 변화 뉴스")
result2 = run_test(test_news2, "대형 계약 체결 뉴스")
result3 = run_test(test_news3, "‘잡음’ 빼면 예상보다 견고했던 美경제…복잡해진 연준 금리궤도")
# 빈 뉴스로 테스트 (오류 처리 확인용)
empty_test = run_test("", "빈 뉴스 테스트")